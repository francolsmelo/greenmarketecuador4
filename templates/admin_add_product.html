{% extends "admin_base.html" %}

{% block title %}Agregar Producto - Panel Admin{% endblock %}

{% block admin_content %}
<div class="admin-header">
    <h1><i class="fas fa-plus"></i> Agregar Nuevo Producto</h1>
    <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary">
        <i class="fas fa-arrow-left"></i> Volver
    </a>
</div>

<div class="form-container">
    <form method="POST" enctype="multipart/form-data" class="product-form">
        <div class="form-group">
            <label for="name"><i class="fas fa-tag"></i> Nombre del Producto *</label>
            <input type="text" id="name" name="name" required placeholder="Ej: Filtro de Aire Ecológico">
        </div>
        
        <div class="form-group">
            <label for="description"><i class="fas fa-align-left"></i> Descripción *</label>
            <textarea id="description" name="description" rows="5" required placeholder="Describe las características y beneficios del producto..."></textarea>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="price"><i class="fas fa-dollar-sign"></i> Precio (USD) *</label>
                <input type="number" id="price" name="price" step="0.01" min="0" required placeholder="0.00">
            </div>
            
            <div class="form-group">
                <label for="stock"><i class="fas fa-boxes"></i> Stock/Cantidad *</label>
                <input type="number" id="stock" name="stock" min="0" required placeholder="0">
            </div>
        </div>
        
        <div class="form-group">
            <label for="image"><i class="fas fa-image"></i> Imagen del Producto</label>
            <input type="file" id="image" name="image" accept="image/*" onchange="previewImage(event)">
            <small>Formatos permitidos: JPG, PNG, GIF, WEBP (máx. 16MB)</small>
        </div>
        
        <div id="imagePreview" class="image-preview" style="display:none;">
            <img id="preview" src="" alt="Vista previa">
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn btn-primary btn-large">
                <i class="fas fa-save"></i> Guardar Producto
            </button>
            <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary btn-large">
                <i class="fas fa-times"></i> Cancelar
            </a>
        </div>
    </form>
</div>

<script>
function previewImage(event) {
    const preview = document.getElementById('imagePreview');
    const previewImg = document.getElementById('preview');
    const file = event.target.files[0];
    
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            previewImg.src = e.target.result;
            preview.style.display = 'block';
        }
        reader.readAsDataURL(file);
    } else {
        preview.style.display = 'none';
    }
}
</script>
{% endblock %}
